# pgbouncer.ini - tests configuration
# - Uses trust auth for simplicity in test environment
# - Proxies to the 'postgres' service on port 5432
# - Listens for client connections on port 6432

[databases]
# Map the default postgres database to the postgres container
postgres = host=postgres port=5433 dbname=postgres

[pgbouncer]
# Network settings
listen_addr = 0.0.0.0
listen_port = 6433

# Authentication â€” use trust for tests to avoid password hassles.
# For production, switch to md5 and provide a proper userlist.
auth_type = trust
auth_file = /etc/pgbouncer/userlist.txt
admin_users = postgres

# Pooling / performance
pool_mode = transaction
default_pool_size = 30
max_client_conn = 100
server_reset_query = DISCARD ALL

# Logging / pid
logfile = /var/log/pgbouncer/pgbouncer.log
pidfile = /var/run/pgbouncer/pgbouncer.pid

# Misc
stats_period = 60
ignore_startup_parameters = extra_float_digits,application_name
