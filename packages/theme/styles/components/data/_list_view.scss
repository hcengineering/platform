//
// Copyright Â© 2021 Anticrm Platform Contributors.
//
// Licensed under the Eclipse Public License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License. You may
// obtain a copy of the License at https://www.eclipse.org/legal/epl-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//
// See the License for the specific language governing permissions and
// limitations under the License.
//

/* ListView */
.listGrid {
  position: relative;
  display: flex;
  align-items: center;
  padding: 0 2.5rem 0 0.25rem;
  width: 100%;
  height: 2.75rem;
  min-height: 2.75rem;
  color: var(--theme-caption-color);
  background-color: var(--theme-list-row-color);

  &.row {
    border-left: 1px solid var(--theme-list-border-color);
    border-right: 1px solid var(--theme-list-border-color);
  }
  &.row:not(.lastCat, .last) {
    border-bottom: 1px solid var(--theme-divider-color);
  }
  &.row.last {
    border-bottom: 1px solid var(--theme-list-subheader-divider);
  }
  &.row.lastCat {
    border-radius: 0 0 0.25rem 0.25rem;
    border-bottom: 1px solid var(--theme-list-border-color);
  }

  &.compactMode {
    padding: 0 1.125rem 0 0.25rem;
  }
  &.hoverable:hover,
  &.mListGridSelected {
    background-color: var(--highlight-hover);
  }
  &.showMore {
    justify-content: center;
    cursor: pointer;
  }

  &.checking {
    background-color: var(--highlight-select);
    // border-bottom-color: var(--highlight-select);

    &:hover,
    &.mListGridSelected {
      background-color: var(--highlight-select-hover);
      // border-bottom-color: var(--highlight-select-hover);
    }
  }

  .draggable-container {
    position: absolute;
    left: 0;
    display: flex;
    align-items: center;
    height: 100%;
    width: 1rem;
    cursor: grabbing;

    .draggable-mark {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      margin-left: 0.125rem;
      width: 0.375rem;
      height: 100%;
      opacity: 0;
    }
  }
  &:hover {
    .draggable-mark {
      opacity: 0.1;
    }
  }

  .hidden-panel,
  .panel-trigger {
    position: absolute;
    display: flex;
    align-items: center;
    top: 0;
    bottom: 0;
    height: 100%;
  }
  .hidden-panel {
    overflow: hidden;
    right: 0;
    width: 80%;
    background-color: var(--theme-comp-header-color);
    opacity: 0;
    pointer-events: none;
    z-index: 2;
    transition-property: opacity, width;
    transition-duration: 0.15s;
    transition-timing-function: var(--timing-main);

    .header {
      display: flex;
      flex-direction: column;
      justify-content: center;
      margin: 0 0.25rem;
      width: 0.375rem;
      min-width: 0.375rem;
      height: 100%;
      opacity: 0.25;
    }
    .scroll-box {
      overflow-x: auto;
      overflow-y: visible;
      display: flex;
      align-items: center;
      margin: 0.125rem 0.25rem 0;
      padding: 0.25rem 0.25rem;
      min-width: 0;

      &::-webkit-scrollbar:horizontal {
        height: 3px;
      }
    }
  }
  .panel-trigger {
    flex-direction: column;
    justify-content: center;
    padding: 0 0.125rem;
    right: 0.125rem;
    width: 0.75rem;
    border: 1px solid transparent;
    border-radius: 0.25rem;
    opacity: 0.1;
    z-index: 1;
    transition: opacity 0.15s var(--timing-main);

    &:focus {
      border-color: var(--primary-edit-border-color);
      opacity: 0.25;
    }
  }
  .hidden-panel:focus-within,
  .hidden-panel:focus,
  .panel-trigger:focus + .hidden-panel {
    width: 100%;
    opacity: 1;
    pointer-events: all;
  }
}

/* ListView - global style */
.list-container .category-container .categoryHeader.subLevel.closed {
  border-radius: 0 0 0.25rem 0.25rem;
  border-bottom: 1px solid var(--theme-list-border-color);
}
.list-container .category-container .categoryHeader.closed:not(.subLevel) {
  border-radius: 0 0 0.25rem 0.25rem;

  &::before,
  &::after {
    border-radius: 0.25rem;
  }
  &::after {
    border-bottom-color: var(--theme-list-border-color);
  }
}
.list-container .category-container .listGrid {
  .fix-margin { margin-left: .875rem; }
  .name { margin-left: .375rem; }

  .compression-bar {
    overflow: hidden;
    display: flex;
    justify-content: flex-end;
    align-items: center;
    flex-grow: 1;
    border-radius: 1.625rem;
    transition: flex-shrink 0.25s cubic-bezier(0.38, 0.01, 0.33, 1) 0s;

    &:hover {
      flex-shrink: .5;
      min-width: initial;
    }
    & > *:last-child {
      flex-shrink: 0;
      width: max-content;
    }
    & > *:not(:first-child) { margin-left: .25rem; }
    & > * > *:not(.only-icon) { min-width: fit-content; }
  }
  .panel-trigger > * { pointer-events: none; }
}
// Labels on the ListView
.list-container .listitems-container,
.list-container .listitems-container:hover,
.list-container .antiButton.list,
.list-container .antiButton.list:hover,
.list-container .datetime-button,
.list-container .datetime-button:hover {
  padding-left: .5rem !important;
  padding-right: .5rem !important;
  font-size: 0.8125rem !important;
  background-color: var(--theme-list-button-color) !important;

  &:not(.only-icon) .btn-icon,
  &:not(.only-icon) .icon { margin-right: .375rem !important; }
  .label {
    font-size: 0.8125rem !important;
    color: var(--theme-halfcontent-color) !important;
  }
}
.list-container .listitems-container,
.list-container .listitems-container:hover,
.list-container .antiButton.list,
.list-container .antiButton.list:hover {
  .icon, .btn-icon { color: var(--theme-halfcontent-color) !important; }
}
.list-container .datetime-button .btn-icon.normal,
.list-container .datetime-button:hover .btn-icon.normal {
  color: var(--theme-halfcontent-color) !important;
} 