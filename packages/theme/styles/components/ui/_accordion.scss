//
// Copyright Â© 2021 Anticrm Platform Contributors.
//
// Licensed under the Eclipse Public License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License. You may
// obtain a copy of the License at https://www.eclipse.org/legal/epl-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//
// See the License for the specific language governing permissions and
// limitations under the License.
//

/* Accordion */
.hulyAccordionItem-container {
  display: flex;
  flex-direction: column;
  flex-shrink: 0;
  width: 100%;
  min-width: 0;
  min-height: 0;

  &:not(.second, .default, .no-border),
  &.border {
    border-top: 1px solid var(--theme-navpanel-divider);
  }
  &.second:not(.isOpen),
  &.border,
  &.default:not(.nested) {
    border-bottom: 1px solid var(--theme-navpanel-divider);
  }
  &.default.nested:not(:last-child) {
    border-bottom: 1px dashed var(--theme-navpanel-divider);
  }
  .hulyAccordionItem-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-shrink: 0;
    margin: 0;
    border: none;
    outline: none;

    &.disabled {
      cursor: default;
    }
    &__label-wrapper {
      display: flex;
      align-items: center;
      gap: var(--spacing-0_75);
      min-width: 0;
    }
    &__chevron,
    &__icon {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-shrink: 0;
    }
    &__chevron {
      width: var(--global-extra-small-Size);
      height: var(--global-extra-small-Size);
      color: var(--global-disabled-TextColor);
      border-radius: var(--extra-small-BorderRadius);

      & > * {
        transform-origin: center;
        transform: rotate(0deg);
        transition: transform 0.1s ease-in-out;
      }
    }
    &__icon {
      color: var(--global-primary-TextColor);
      background-color: var(--global-ui-BackgroundColor);
      border: 1px solid var(--global-subtle-ui-BorderColor);
    }
    &__label {
      white-space: nowrap;
      word-break: break-all;
      text-overflow: ellipsis;
      overflow: hidden;
    }
    &__tools {
      display: flex;
      align-items: center;
      flex-shrink: 0;
      gap: var(--spacing-0_5);
      min-width: 0;
      max-width: 50%;
    }
    &__separator,
    &__counter,
    &__duration {
      flex-shrink: 0;
      min-width: 0;
      color: var(--global-tertiary-TextColor);
    }
    &__duration {
      font-weight: 400;
    }

    &.categoryHeader {
      position: sticky;
      top: 0;
      z-index: 100;
    }  
    &.selectable.large {
      .hulyAccordionItem-header__label-wrapper {
        gap: var(--spacing-0_25);
      }
      .hulyAccordionItem-header__label {
        padding: var(--spacing-0_5) var(--spacing-1);
        border-radius: var(--extra-small-BorderRadius);
      }
      &.selected .hulyAccordionItem-header__label,
      .hulyAccordionItem-header__label:hover {
        background-color: var(--global-ui-hover-BackgroundColor);
      }
    }

    &.small .hulyAccordionItem-header__chevron {
      margin: 0 0.125rem;
      width: 1.25rem;
      height: 1.25rem;
      border: 1px solid transparent;
    }
    &.medium .hulyAccordionItem-header__chevron {
      margin-right: var(--spacing-0_75);
      background-color: var(--global-ui-BackgroundColor);
      border: 1px solid var(--global-subtle-ui-BorderColor);
    }
    &.small,
    &.medium {
      padding: var(--spacing-1) var(--spacing-2);
      min-height: var(--global-medium-Size);
      
      .hulyAccordionItem-header__label-wrapper {
        padding: var(--spacing-0_25) var(--spacing-0_5);
        color: var(--global-tertiary-TextColor);
        border-radius: var(--extra-small-BorderRadius);
      }
      .hulyAccordionItem-header__label {
        text-transform: uppercase;
      }

      &:hover {
        .hulyAccordionItem-header__label {
          color: var(--global-primary-TextColor);
        }
      }

      &:active,
      &.default.isOpen,
      &.selected {
        &:hover {
          .hulyAccordionItem-header__label-wrapper {
            background-color: var(--global-ui-hover-BackgroundColor);
          }
          .hulyAccordionItem-header__label {
            color: var(--global-primary-TextColor);
          }
        }
        .hulyAccordionItem-header__label-wrapper {
          background-color: var(--global-ui-BackgroundColor);
        }
        .hulyAccordionItem-header__label,
        .hulyAccordionItem-header__counter,
        .hulyAccordionItem-header__duration {
          color: var(--global-secondary-TextColor);
        }
      }
      &:hover {
        .hulyAccordionItem-header__label-wrapper {
          background-color: var(--global-ui-hover-BackgroundColor);
        }
        .hulyAccordionItem-header__counter {
          color: var(--global-primary-TextColor);
        }
        .hulyAccordionItem-header__duration {
          color: var(--global-secondary-TextColor);
        }
      }
    }
    &.medium {
      padding: var(--spacing-1_5) var(--spacing-2);
      min-height: var(--global-medium-Size);
      
      .hulyAccordionItem-header__label-wrapper {
        &.withIcon {
          padding: 0 var(--spacing-1) 0 0;
        }
        &:not(.withIcon) {
          padding: var(--spacing-0_5) var(--spacing-1);
        }
      }
      &.nested {
        padding-left: var(--spacing-2);
        
        & + .hulyAccordionItem-content {
          margin-left: var(--spacing-2);
          margin-right: var(--spacing-2);
        }
      }
      .hulyAccordionItem-header__icon {
        margin-right: var(--spacing-0_5);
        width: var(--global-extra-small-Size);
        height: var(--global-extra-small-Size);
        border-radius: var(--extra-small-BorderRadius);
      }
    }
    &.large {
      padding: var(--spacing-2) var(--spacing-1_5) var(--spacing-2) var(--spacing-2);
      min-height: var(--global-extra-large-Size);
      
      .hulyAccordionItem-header__label-wrapper {
        gap: var(--spacing-1);
        color: var(--global-tertiary-TextColor);
      }
      .hulyAccordionItem-header__icon {
        width: var(--global-small-Size);
        height: var(--global-small-Size);
        border-radius: var(--small-BorderRadius);
      }
      .hulyAccordionItem-header__label {
        margin-left: var(--spacing-0_5);
        color: var(--global-secondary-TextColor);
      }
      .hulyAccordionItem-header__counter {
        font-weight: 400;
      }

      &:active,
      &:hover,
      &.default.isOpen,
      &.selected {
        .hulyAccordionItem-header__label {
          color: var(--global-primary-TextColor);
        }
        .hulyAccordionItem-header__counter,
        .hulyAccordionItem-header__duration {
          color: var(--global-secondary-TextColor);
        }
      }
    }
    &.hiddenHeader {
      display: none;
      visibility: hidden;

      &.nested + .hulyAccordionItem-content { padding-top: var(--spacing-1); }
    }
    &:hover .hulyAccordionItem-header__chevron {
      color: var(--button-subtle-IconColor);
      background-color: var(--global-ui-hover-BackgroundColor);
    }

    &.isOpen {
      & + .hulyAccordionItem-content {
        max-height: 100%;
      }
      &.small.bottomSpace + .hulyAccordionItem-content,
      &.small.nav + .hulyAccordionItem-content {
        padding-bottom: var(--spacing-1_5);
      }
      &.medium.bottomSpace + .hulyAccordionItem-content {
        padding-bottom: var(--spacing-2);
      }
      &.medium.nested.bottomSpace + .hulyAccordionItem-content {
        padding-bottom: var(--spacing-1);
      }
      &.large.bottomSpace + .hulyAccordionItem-content {
        padding-bottom: var(--spacing-2);
      }
      &:is(.small, .large) .hulyAccordionItem-header__chevron > * {
        transform: rotate(90deg);
      }
    }
  }
  .hulyAccordionItem-content {
    overflow: hidden;
    display: flex;
    flex-direction: column;
    padding: 0;
    min-width: 0;
    max-height: 0;
  }
}
